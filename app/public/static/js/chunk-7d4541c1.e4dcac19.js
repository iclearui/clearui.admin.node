(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d4541c1","chunk-2d0c4a43"],{"3c63":function(e,t,r){e.exports=r.p+"static/img/organ.124b0c65.png"},"52ab":function(e,t,r){"use strict";var a=r("cad7"),s=r.n(a);s.a},cad7:function(e,t,r){},dd7b:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("div",{staticClass:"login-form"},[r("a-card",{attrs:{title:"登录","body-style":{padding:"24px 48px"}}},[r("a",{attrs:{slot:"extra"},on:{click:function(t){e.visible=!0}},slot:"extra"},[e._v("没有账号,立即注册？")]),r("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userCode",{rules:[{required:!0,message:"请输入用户名!"}]}],expression:"['userCode',{ rules: [{ required: true, message: '请输入用户名!' }] },]"}],attrs:{placeholder:"用户名"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userPwd",{rules:[{required:!0,message:"请输入密码!"}]}],expression:"['userPwd',{ rules: [{ required: true, message: '请输入密码!' }] },]"}],attrs:{type:"password",placeholder:"密码"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["remember",{valuePropName:"checked",initialValue:!0}],expression:"['remember',{valuePropName: 'checked',initialValue: true,},]"}],staticStyle:{float:"left"}},[e._v("记住用户名 ")]),r("a",{staticStyle:{float:"right"},attrs:{href:""}},[e._v("忘记密码？")])],1),r("a-form-item",[r("a-button",{attrs:{type:"primary","html-type":"submit",block:""}},[e._v("立即登录")])],1),r("div",{staticClass:"user-login-other"},[r("a",[r("a-icon",{staticClass:"item-icon",attrs:{type:"alipay-circle"}})],1),r("a",[r("a-icon",{staticClass:"item-icon",attrs:{type:"taobao-circle"}})],1),r("a",[r("a-icon",{staticClass:"item-icon",attrs:{type:"weibo-circle"}})],1)])],1)],1)],1),r("a-modal",{attrs:{footer:null,width:1024,"mask-closable":!1,closable:!1,"body-style":{padding:0}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("a-card",{attrs:{title:"已加入组织",bordered:!1,extra:",您好，欢迎使用"}},[e.organUsers.filter((function(e){return"Admin"===e.userType||"User"===e.userType})).length>0?r("a-row",{attrs:{type:"flex",justify:"start"}},[e._l(e.organUsers,(function(t){return["Admin"===t.userType||"User"===t.userType?r("a-col",{key:t._id,staticStyle:{padding:"0 10px 10px 0","min-width":"150px"},attrs:{span:"4"}},[r("a",{staticStyle:{color:"#000000"},attrs:{title:"点击进入系统"},on:{click:function(r){return e.goWelcome(t)}}},[r("div",{staticStyle:{"text-align":"center"}},[r("a-row",{staticStyle:{"margin-bottom":"12px"}},["Admin"===t.userType||"User"===t.userType?r("a-avatar",{attrs:{shape:"square",size:80,src:e.organ}}):e._e()],1),r("a-row",{staticClass:"text"},[r("a-tooltip",{attrs:{placement:"bottom",title:t.idOrgan.organName}},[e._v(" "+e._s(t.idOrgan.organName)+" ")])],1),"Admin"===t.userType?r("span",{staticStyle:{color:"#2D8cF0","font-size":"10px"}},[e._v("[超级管理员]")]):"User"===t.userType?r("span",{staticStyle:{color:"#2D8cF0","font-size":"10px"}},[e._v("[普通用户]")]):e._e()],1)])]):e._e()]}))],2):r("a-empty",{attrs:{description:"暂未加入任何企业"}})],1),r("a-card",{attrs:{title:"更多操作",bordered:!1}},[r("a-row",[r("a-col",{staticStyle:{padding:"0 10px 10px 0","min-width":"150px"},attrs:{span:"4"}},[r("a",{staticStyle:{color:"#000000"},on:{click:function(t){return e.logout()}}},[r("div",{staticStyle:{"text-align":"center"}},[r("a-row",{staticStyle:{"margin-bottom":"24px"}},[r("a-avatar",{staticStyle:{"background-color":"#ed4014"},attrs:{shape:"square",size:80,icon:"poweroff"}})],1),r("a-row",[e._v("退出系统")])],1)])])],1)],1)],1),r("div",{staticStyle:{width:"100%","text-align":"center","font-size":"14px",bottom:"12px",position:"fixed"}},[e._v("© 2015-"+e._s((new Date).getFullYear())+" "),r("a",{attrs:{href:"https://www.emaiban.com"}},[e._v("emaiban.com")]),e._v(" 浙ICP备15005064号-2 ")])],1)},s=[],i=(r("96cf"),r("1da1")),o={data:function(){return{visible:!1,organ:r("3c63"),organUsers:[]}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"normal_login"})},mounted:function(){this.$cookies.get("access_user")&&(this.getOrganUsers(this.$cookies.get("access_user")),this.visible=!0)},methods:{handleSubmit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.preventDefault(),t.form.validateFields(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r,a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=9;break}return e.next=3,t.$http.post(t.$url.login,a);case 3:if(s=e.sent,"0"!==s.data.error.code){e.next=9;break}return t.$cookies.set("access_user",s.data.record),e.next=8,t.getOrganUsers(s.data.record._id);case 8:t.visible=!0;case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})))()},getOrganUsers:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$helper.model("org_organ_user").get({params:{filter:{idUser:e},populate:"idOrgan"}});case 2:t.organUsers=r.sent.records;case 3:case"end":return r.stop()}}),r)})))()},goWelcome:function(e){this.$cookies.set("access_token",e._id),this.$cookies.set("access_organ",e.idOrgan),this.$router.push({name:"welcome"})},logout:function(){this.$cookies.remove("access_user"),this.$cookies.remove("access_token"),this.$cookies.remove("access_organ"),location.reload()}}},n=o,c=(r("52ab"),r("2877")),l=Object(c["a"])(n,a,s,!1,null,null,null);t["default"]=l.exports}}]);